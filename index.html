
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>M&H | Elevated Essentials</title>
    <!-- Google Fonts: Playfair Display for elegance, Inter for UI -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=Playfair+Display:ital,wght@0,400;0,600;0,700;1,400&display=swap" rel="stylesheet">
    
    <!-- Using ./ ensures explicit relative pathing for subdirectories -->
    <link rel="stylesheet" href="./style.css">
<link rel="stylesheet" href="/index.css">
</head>
<body id="body">

    <!-- Toast Notification -->
    <div id="toast" class="toast">
        <div class="toast-content">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="toast-icon"><polyline points="20 6 9 17 4 12"></polyline></svg>
            <span id="toast-message">Item added to cart</span>
        </div>
    </div>

    <!-- Header -->
    <header class="header" id="header">
        <div class="container header-inner">
            <!-- Mobile Menu Toggle -->
            <button class="mobile-menu-toggle" onclick="toggleMobileMenu()" aria-label="Open menu">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <line x1="3" y1="12" x2="21" y2="12"></line>
                    <line x1="3" y1="6" x2="21" y2="6"></line>
                    <line x1="3" y1="18" x2="21" y2="18"></line>
                </svg>
            </button>

            <a class="logo" href="/" onclick="event.preventDefault(); scrollToGrid()">M&H</a>
            
            <!-- Main Navigation (Desktop & Mobile Dropdown) -->
            <nav class="nav-wrapper" id="nav-wrapper">
                <ul class="nav-menu">
                    <li><a class="nav-link active" id="nav-home" href="/" onclick="event.preventDefault(); scrollToGrid()">Home</a></li>
                    
                    <li class="has-dropdown" id="products-dropdown-li">
                        <a class="nav-link" onclick="toggleMobileDropdown(event)">Products</a>
                        <ul class="dropdown-menu">
                            <li><a onclick="filterProducts('All'); showHome();">All</a></li>
                            <li><a onclick="filterProducts('Sale'); showHome();" style="color: #D32F2F;">Sale</a></li>
                            <li><a onclick="filterProducts('Tops'); showHome();">Tops</a></li>
                            <li><a onclick="filterProducts('Bottoms'); showHome();">Bottoms</a></li>
                            <li><a onclick="filterProducts('Dresses'); showHome();">Dresses</a></li>
                            <li><a onclick="filterProducts('Outerwear'); showHome();">Outerwear</a></li>
                            <li><a onclick="filterProducts('Accessories'); showHome();">Accessories</a></li>
                        </ul>
                    </li>
                    
                    <li><a class="nav-link" id="nav-about" href="/about" onclick="event.preventDefault(); showAbout()">About Us</a></li>

                    <!-- Mobile Only Favorites Link -->
                    <li class="mobile-only"><a class="nav-link" onclick="openFavoritesModal()">Saved Items</a></li>
                </ul>
            </nav>

            <nav class="nav-actions">
                <!-- Search Trigger -->
                <button class="search-trigger" onclick="toggleSearch()" aria-label="Toggle search">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="11" cy="11" r="8"></circle>
                        <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                    </svg>
                </button>

                <!-- Favorites Trigger (Hidden on Mobile) -->
                <button class="favorites-trigger" id="fav-icon-btn" onclick="openFavoritesModal()" aria-label="Open Favorites">
                    <!-- Icon injected via JS for state -->
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
                    </svg>
                    <span id="favorites-count-bubble" class="favorites-count-bubble"></span>
                </button>

                <button class="theme-toggle" onclick="toggleTheme()" aria-label="Toggle theme">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                </button>
                
                <!-- Cart Wrapper for Mini Cart Preview -->
                <div class="cart-wrapper">
                    <button class="cart-trigger" id="cart-icon-btn" onclick="toggleCart()" aria-label="Open cart">
                        <!-- Icon injected via JS for state -->
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"></path>
                            <line x1="3" y1="6" x2="21" y2="6"></line>
                            <path d="M16 10a4 4 0 0 1-8 0"></path>
                        </svg>
                        <span class="cart-count-bubble" id="header-count">0</span>
                    </button>
                    
                    <!-- Mini Cart Dropdown -->
                    <div class="mini-cart-dropdown" id="mini-cart-dropdown">
                        <div class="mc-header">Just Added</div>
                        <div id="mc-content">
                            <!-- JS Injection -->
                            <p style="color: var(--secondary); font-size: 0.9rem;">Your bag is empty.</p>
                        </div>
                    </div>
                </div>
            </nav>
        </div>
        
        <!-- Category Chips Container (Mobile Focus) -->
        <div class="category-chips-container" id="category-chips">
            <div class="chip-scroll">
                <button class="category-chip active" onclick="filterProducts('All')">All</button>
                <button class="category-chip" onclick="filterProducts('Sale')">Sale</button>
                <button class="category-chip" onclick="filterProducts('Tops')">Tops</button>
                <button class="category-chip" onclick="filterProducts('Bottoms')">Bottoms</button>
                <button class="category-chip" onclick="filterProducts('Dresses')">Dresses</button>
                <button class="category-chip" onclick="filterProducts('Outerwear')">Outerwear</button>
                <button class="category-chip" onclick="filterProducts('Accessories')">Accessories</button>
            </div>
        </div>

        <!-- Search Overlay (Hidden by default) -->
        <div id="search-overlay" class="search-overlay">
            <div class="container search-container">
                <svg class="search-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <circle cx="11" cy="11" r="8"></circle>
                    <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                </svg>
                <input type="text" id="search-input" placeholder="Search for products..." oninput="handleSearch(this.value)">
                <button class="search-close" onclick="toggleSearch()">&times;</button>
            </div>
        </div>
    </header>

    <!-- HOME VIEW -->
    <div id="home-view">
        <!-- Hero -->
        <section class="hero">
            <div class="hero-content">
                <span class="hero-subtitle">Spring / Summer 2024</span>
                <h2>Natural. Timeless. You.</h2>
                <button class="btn-hero" onclick="scrollToGrid()">Explore Collection</button>
            </div>
        </section>

        <!-- Main Content -->
        <main class="container" id="shop-section">
            <div class="section-header reveal-on-scroll">
                <h3 id="collection-title">New Arrivals</h3>
                <p>Thoughtfully designed pieces for the contemporary wardrobe. Sustainable, timeless, and effortlessly chic.</p>
            </div>

            <!-- Shop Toolbar (Sort & Count) -->
            <div class="shop-toolbar reveal-on-scroll">
                <span id="product-count" class="product-count-text">Loading...</span>
                <div class="sort-wrapper">
                    <select id="sort-select" onchange="handleSort(this.value)" aria-label="Sort products">
                        <option value="default">Sort by: Recommended</option>
                        <option value="price-asc">Price: Low to High</option>
                        <option value="price-desc">Price: High to Low</option>
                    </select>
                    <svg class="sort-icon" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg>
                </div>
            </div>

            <div id="product-grid" class="product-grid">
                <!-- JS Injection -->
            </div>
        </main>
    </div>

    <!-- ABOUT VIEW (Hidden by default) -->
    <div id="about-view" style="display: none;">
        <section class="about-hero reveal-on-scroll">
            <span class="subtitle">Our Story</span>
            <h1>Crafting Confidence</h1>
        </section>

        <div class="container">
            <section class="mission-statement reveal-on-scroll">
                <h2>"M&H was born from a desire to simplify the modern wardrobe. We believe true style empowers, never complicates."</h2>
            </section>

            <section class="story-section reveal-on-scroll">
                <div class="story-image">
                    <img src="https://images.unsplash.com/photo-1441984904996-e0b6ba687e04?q=80&w=2670&auto=format&fit=crop" alt="M&H Studio Sketches">
                </div>
                <div class="story-content">
                    <h3>The Origin</h3>
                    <p>It began in 2024 with a simple observation: the fashion industry was noisy, fast, and often fleeting. We wanted to build something quieter, something that would last.</p>
                    <p>Our philosophy is grounded in two pillars: Sustainability and Timelessness. Every piece we design is meant to last—not just in durability, but in relevance. We source premium organic materials and work with ethical manufacturers to ensure that your clothing looks good and does good.</p>
                    <p>We are a small team of designers and dreamers based in the heart of the city, dedicated to the art of slow fashion.</p>
                </div>
            </section>
        </div>

        <section class="values-wrapper reveal-on-scroll">
            <div class="container">
                <div class="values-grid">
                    <div class="value-item">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path></svg>
                        <h4>Ethical Integrity</h4>
                        <p>We work exclusively with factories that ensure fair wages and safe working conditions. Transparency is our baseline.</p>
                    </div>
                    <div class="value-item">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.24 12.24a6 6 0 0 0-8.49-8.49L5 10.5V19h8.5z"></path><line x1="16" y1="8" x2="2" y2="22"></line><line x1="17.5" y1="15" x2="9" y2="15"></line></svg>
                        <h4>Artisan Quality</h4>
                        <p>Every seam, button, and stitch is inspected. We believe in clothing that feels better the longer you wear it.</p>
                    </div>
                    <div class="value-item">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path><polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline><line x1="12" y1="22.08" x2="12" y2="12"></line></svg>
                        <h4>Sustainable Future</h4>
                        <p>From organic cottons to recyclable packaging, we are committed to reducing our footprint on the planet.</p>
                    </div>
                </div>
            </div>
        </section>

        <div class="container">
            <section class="contact-section reveal-on-scroll">
                <div class="section-header" style="margin-bottom: 3rem;">
                    <h3>Connect With Us</h3>
                    <p>We'd love to hear from you.</p>
                </div>
                <div class="contact-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem;">
                    <div class="contact-card">
                        <h4>Customer Care</h4>
                        <p>For inquiries, sizing advice, or just to say hello.</p>
                        <ul>
                            <li><a href="mailto:info@mandh-store.com">info@mandh-store.com</a></li>
                            <li><a href="tel:+96170123456">+961 70 123 456</a></li>
                        </ul>
                    </div>
                    <div class="contact-card">
                        <h4>Community</h4>
                        <p>Join our journey and see behind the scenes.</p>
                        <ul>
                            <li><a href="#" target="_blank">Instagram</a></li>
                            <li><a href="#" target="_blank">TikTok</a></li>
                            <li><a href="#" target="_blank">Pinterest</a></li>
                        </ul>
                    </div>
                    <div class="contact-card">
                        <h4>Visit Our Studio</h4>
                        <p>By appointment only.</p>
                        <ul>
                            <li>Mar Mikhael, Armenia Street</li>
                            <li>Beirut, Lebanon</li>
                        </ul>
                    </div>
                </div>
            </section>
        </div>
    </div>

    <!-- Footer (Minimalist) -->
    <footer class="main-footer minimalist reveal-on-scroll" id="footer">
        <div class="container footer-bottom">
            <div class="footer-links">
                <a onclick="openPrivacyModal()">Privacy Policy</a>
                <a onclick="openTermsModal()">Terms of Service</a>
            </div>
            <p>&copy; 2024 M&H. All rights reserved.</p>
        </div>
    </footer>

    <!-- Product Details Modal -->
    <div id="product-modal" class="modal-overlay" onclick="closeModal(event)">
        <div class="modal-content product-modal-content" onclick="event.stopPropagation()">
            <button class="modal-close" onclick="closeModal()">&times;</button>
            <div class="modal-image-col">
                <img id="modal-img" src="" alt="">
            </div>
            <div class="modal-details-col">
                <span id="modal-category" class="product-category"></span>
                <h3 id="modal-title" class="modal-title"></h3>
                <span id="modal-price" class="modal-price"></span>
                <p id="modal-desc" class="modal-desc"></p>
                
                <div class="size-selector">
                    <span class="size-label">Select Size <a onclick="showSizeGuide()" class="size-guide-link">Size Guide</a></span>
                    <div id="modal-sizes" class="size-options">
                        <!-- JS Injection -->
                    </div>
                </div>

                <!-- Quantity Selector -->
                <div class="modal-qty-wrapper">
                    <span class="size-label">Quantity</span>
                    <div class="modal-qty-controls">
                        <button class="modal-qty-btn" onclick="updateModalQty(-1)">−</button>
                        <span id="modal-qty-val" class="modal-qty-val">1</span>
                        <button class="modal-qty-btn" onclick="updateModalQty(1)">+</button>
                    </div>
                </div>

                <div class="modal-actions">
                    <button class="btn-modal-add" onclick="addToCartFromModal()">
                        Add to Cart
                    </button>
                </div>

                <div class="recommendations-section">
                    <h4 class="recommendations-title">You might also like</h4>
                    <div id="rec-grid" class="recommendations-grid">
                        <!-- JS Injection -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Checkout Modal -->
    <div id="checkout-modal" class="modal-overlay" onclick="closeCheckoutModal(event)">
        <div class="modal-content checkout-modal-content" onclick="event.stopPropagation()">
            <button class="modal-close" onclick="closeCheckoutModal()">&times;</button>
            <div class="checkout-header">
                <span class="checkout-subtitle">FINALIZE</span>
                <h3>Delivery details</h3>
            </div>
            
            <form id="checkout-form" onsubmit="event.preventDefault(); processCheckout();">
                <div class="form-group">
                    <label>Name</label>
                    <input type="text" id="cust-name" placeholder="Your full name" required>
                </div>
                <div class="form-group">
                    <label>Phone (Lebanon)</label>
                    <input type="tel" id="cust-phone" placeholder="+961 71 234 567" required>
                </div>
                <div class="form-group">
                    <label>Delivery area</label>
                    <select id="cust-area" required onchange="updateCheckoutTotal()">
                        <option value="" disabled selected>Select area (delivery added)</option>
                        <option value="Beirut">Beirut ($5.00)</option>
                        <option value="Mount Lebanon">Mount Lebanon ($6.00)</option>
                        <option value="North">North ($8.00)</option>
                        <option value="South">South ($8.00)</option>
                        <option value="Bekaa">Bekaa ($8.00)</option>
                    </select>
                </div>

                <div class="checkout-summary">
                    <span>Delivery</span>
                    <span id="checkout-delivery-display">--</span>
                </div>
                <div class="checkout-summary total-row">
                    <span>Order total</span>
                    <span id="checkout-total-display">$0.00</span>
                </div>

                <p class="checkout-note">We confirm everything via WhatsApp before shipping.</p>

                <button type="submit" class="btn-checkout-submit">
                    Send order via WhatsApp
                </button>
            </form>
        </div>
    </div>

    <!-- Privacy Policy Modal -->
    <div id="privacy-modal" class="modal-overlay" onclick="closePrivacyModal(event)">
        <div class="modal-content info-modal-content" onclick="event.stopPropagation()">
            <button class="modal-close" onclick="closePrivacyModal()">&times;</button>
            <h3>Privacy Policy</h3>
            
            <h4>1. Introduction</h4>
            <p>At M&H, we value your privacy. This policy explains how we handle your information when you browse our catalog or place orders via WhatsApp.</p>
            
            <h4>2. Data Collection</h4>
            <p>We do not store sensitive personal payment data on this site. When you place an order, you voluntarily share your Name, Phone Number, and Delivery Address via WhatsApp for fulfillment purposes.</p>
            
            <h4>3. Local Storage</h4>
            <p>We use your browser's local storage to save your cart items and favorites locally on your device for a better user experience.</p>
            
            <h4>4. Contact Us</h4>
            <p>If you have questions about how your data is handled during the order process, please contact us at info@mandh-store.com.</p>
        </div>
    </div>

    <!-- Terms of Service Modal -->
    <div id="terms-modal" class="modal-overlay" onclick="closeTermsModal(event)">
        <div class="modal-content info-modal-content" onclick="event.stopPropagation()">
            <button class="modal-close" onclick="closeTermsModal()">&times;</button>
            <h3>Terms of Service</h3>
            
            <h4>1. Acceptance</h4>
            <p>By accessing the M&H online store, you agree to be bound by these terms of service and agree that you are responsible for compliance with any applicable local laws.</p>
            
            <h4>2. Use License</h4>
            <p>Permission is granted to temporarily view the materials (images and text) on M&H's website for personal, non-commercial transitory viewing only.</p>
            
            <h4>3. Orders & Pricing</h4>
            <p>All orders are subject to availability. Prices for our products are subject to change without notice. We reserve the right to refuse service to anyone for any reason at any time.</p>
            
            <h4>4. Returns & Exchanges</h4>
            <p>Please refer to our return policy provided upon purchase confirmation via WhatsApp. Generally, items must be unused and in original packaging.</p>
        </div>
    </div>
    
    <!-- Favorites Modal -->
    <div id="favorites-modal" class="modal-overlay" onclick="closeFavoritesModal(event)">
        <div class="modal-content favorites-modal-content" onclick="event.stopPropagation()">
            <button class="modal-close" onclick="closeFavoritesModal()">&times;</button>
            <h3>Your Favorites</h3>
            <div id="favorites-grid" class="favorites-grid">
                <!-- JS Injection -->
            </div>
        </div>
    </div>

    <!-- Cart Sidebar -->
    <div class="cart-overlay" onclick="toggleCart()"></div>
    <aside class="cart-sidebar">
        <div class="cart-header">
            <h4>Shopping Cart</h4>
            <button class="close-cart" onclick="toggleCart()">&times;</button>
        </div>
        
        <div id="cart-items" class="cart-body">
            <!-- JS Injection -->
        </div>

        <div class="cart-footer">
            <div class="cart-total-row">
                <span>Subtotal</span>
                <span id="cart-total">$0.00</span>
            </div>
            <button id="whatsapp-btn" class="btn-whatsapp" onclick="openCheckoutModal()">
                Confirm Your Order in WhatsApp
            </button>
        </div>
    </aside>

    <!-- Load scripts in order: Data first, then Logic -->
    <!-- Using ./ ensures explicit relative pathing -->
    <script src="./products.js"></script>
    <script src="./script.js"></script>
    
    <!-- This module script is required for dev environments but optional for prod -->
    <script type="module" src="/index.tsx"></script>
</body>
</html>
